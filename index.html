<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Letsee AR Demo - Ultima Cena</title>
	<meta content="minimum-scale=1.0, width=device-width, maximum-scale=1, user-scalable=no, viewport-fit=cover" name="viewport" />
<!--	<script src="https://auth.letsee.io/webar?key=5d77d81e1debaa58b278e63044bb9e2da4732fd95c58ff4a496d929fbeec0927"></script>-->
<!--	 <script src="https://intra.letsee.io:10000/lib/letsee-1.0.0.js"></script>-->
	<script src="https://intra.letsee.io/lib2/Letsee.0.9.14.js"></script>
	
<!--	<link href="https://fonts.googleapis.com/css?family=Noto+Sans:100,300,400,700,900&display=swap" rel="stylesheet">-->
	
	<script src="//code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
	<script src="//code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
	
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/animation.css">
	<link rel="stylesheet" href="css/layout.css">

	<script src="js/main.js"></script>
	<style media="place" type="text/css">
		#container {
			-letsee-target: uri('/docent/ultima-cena.json');
			-letsee-position: coords(0, 0, 0);
			width: 1000px;
			height: 560px;
			/*border: 1px solid red;*/
		}
	</style>
	
	<style>
		/*@media screen and (max-width: 360px) and (orientation: portrait) {
			#logo {
				left: 33% !important;
			}
			#copyright {
				left: 63% !important;
			}
		}
		@media screen and (max-width: 360px) and (orientation: landscape) {
			#logo {
				left: 41% !important;
			}
			#copyright {
				left: 58% !important;
			}
		}*/
		/*@media screen and (max-width: 768px) and (orientation: portrait) {
			#logo {
				left: 41% !important;
			}
		}
		@media screen and (max-width: 768px) and (orientation: landscape) {
			#logo {
				left: 44% !important;
			}
		}*/
		/*@media screen and (max-width: 1024px) and (orientation: portrait) {
			#detect_img {
				width: 25% !important;
				top: 43% !important;
			}
			#detect_msg {
				width: 35% !important;
				top: 60% !important;
			}
		}*/
		
		@media (orientation: portrait) {
			#detect {
				display: block !important;
			}
			#footer {
				display: block !important;
			}
			#night{
				display: none !important;
			}
			#capture {
				display: none !important;
			}
		}
	</style>

</head>
<body style="overflow:hidden;">

<!--###################################################### 증강전 #####################################################-->
<div id="detect">
	<img id="detect_img" src="assets/phone-rotation.svg" alt=""/>
	<img id="detect_msg" src="assets/detect_msg.png" alt="">
</div>

<!--Show at first time to alert user-->
<div id="capture">
	<img id="cap1" src="assets/ico-camera.svg" alt="">
	<p>작품을 정면으로 촬영해주세요.</p>
</div>

<!-- Spotlight-->
<div id="night">
	<img id="overlayGuide" src="assets/hands.svg" alt="">
	<img id="centerPoint" src="assets/point-red.svg" alt="" style="display: block">
</div>
<div class="btn_area">
	<div class="blue_btn">
		<span class="light"></span>
		<button id="spotLightBtn" onclick="callAutoLight()">자동 비추기</button>
	</div>
</div>

<div id="container">

	<!--################################################## Introduce ##################################################-->
	<div id="tab-header">
		<div id="tab-1" onclick="switchTab(1)">
			<div class="tab-item-wrapper">
				<img src="assets/ico-introduce.svg" alt="">
				<p>작품 소개</p>
			</div>
		</div>
		<div id="tab-2" onclick="switchTab(2)">
			<div class="tab-item-wrapper">
				<img src="assets/ico-12-mens.svg" alt="">
				<p>12제자</p>
			</div>
		</div>
		<div id="tab-3" onclick="switchTab(3)">
			<div class="tab-item-wrapper">
				<img src="assets/ico-1-per.svg" alt="">
				<p>1% 비밀</p>
			</div>
		</div>
		<div id="tab-4" onclick="switchTab(4)">
			<div class="tab-item-wrapper">
				<img src="assets/ico-pwcode.svg" alt="">
				<p>암호 코드</p>
			</div>
		</div>
	</div>

	<div id="main-title">
		<p id="title">최후의 만찬</p>
		<p id="author">(레오나르도 다빈치, 1452∼1519)</p>
	</div>
	
	<div class="btn_area" style="top: 83% !important;">
		<div class="blue_btn">
			<span class="light"></span>
			<button id="layerviewBtn">작품 소개 보기</button>
		</div>
	</div>

	<!--################################################## Tab Content ##################################################-->
	<div id="main-content">

		<!-- Content tab-1 -->
		<div id="content-1">
			<img class="closeBtn" src="assets/btn-close.svg" alt="" onclick="closeContent('#content-1')">
			<h2>최후의 만찬 (The Last Supper, 1485 ~ 1497)</h2>
			<p> '최후의 만찬'은 예수 그리스도가 십자가에 매달리기 전날 제자들과 함께 최후의 만찬의 정경을 그린 것이다.
				밀라노의 산타마리아 델레 그라치에 수도원(Chiesa di Santa Maria delle Grazie)의 식당 벽에 그려져 있으며, 1980년 산타마리아 델레 그라치에 수도원과 함께 유네스코 세계문화유산으로 지정했다. 
				<br><br>
				다빈치는 예수와 12제자가 등장하는 그림 안에서는 여러 가지 일들이 동시에 벌어지고 상황을 등장인물들의 심리묘사와 함께 전체 화면의 조형성을 표현하고자 했다. 예루살렘의 어느 방에서 펼쳐진 역사적 사건에 등장하는 각 인물의 몸짓과 손짓, 미묘한 속임수와 암시를 역동적인 상황에 맞춰 절묘하게 묘사했다.
			</p>

			<img id="intro-vinci" src="assets/vinci-0@3x.png" alt="">
		</div>

		<!-- Content tab-2 -->
		<div id="content-2">
			<h1 id="tab2-title">최후의 만찬을 함께한 예수의 제자들은 누구?</h1>

			<div id="peopleBtn">
				<button id="bartholomaeusBtn" onclick="showPeopleInfo('bartholomaeusBtn')">바로톨로메오</button>
				<img id="l1" src="assets/lines/01-line.svg" alt="">
				
				<button id="andreasBtn" onclick="showPeopleInfo('andreasBtn')">안드레아</button>
				<img id="l3" src="assets/lines/03-line.svg" alt="">
				
				<button id="jacobusBtn" onclick="showPeopleInfo('jacobusBtn')">큰 야고보</button>
				<img id="l2" src="assets/lines/02-line.svg" alt="">
				
				<button id="petrusBtn" onclick="showPeopleInfo('petrusBtn')">베드로</button>
				<img id="l4" src="assets/lines/04-line.svg" alt="">
				
				<button id="judasBtn" onclick="showPeopleInfo('judasBtn')">유다</button>
				<img id="l5" src="assets/lines/05-line.svg" alt="">
				
				<button id="jonnesBtn" onclick="showPeopleInfo('jonnesBtn')">요한</button>
				<img id="l6" src="assets/lines/06-line.svg" alt="">
				
				<button id="jesusBtn" onclick="showPeopleInfo('jesusBtn')">예수</button>
				<img id="l0" src="assets/lines/00-line.svg" alt="">
				
				<button id="thomasBtn" onclick="showPeopleInfo('thomasBtn')">토마스</button>
				<img id="l8" src="assets/lines/08-line.svg" alt="">
				
				<button id="jamesBtn" onclick="showPeopleInfo('jamesBtn')">작은 야고보</button>
				<img id="l7" src="assets/lines/07-line.svg" alt="">
				
				<button id="philipBtn" onclick="showPeopleInfo('philipBtn')">필립보</button>
				<img id="l9" src="assets/lines/09-line.svg" alt="">
				
				<button id="mathewBtn" onclick="showPeopleInfo('mathewBtn')">마테오</button>
				<img id="l10" src="assets/lines/10-line.svg" alt="">
				
				<button id="thaddaeusBtn" onclick="showPeopleInfo('thaddaeusBtn')">유대</button>
				<img id="l11" src="assets/lines/11-line.svg" alt="">
				
				<button id="simonBtn" onclick="showPeopleInfo('simonBtn')">성 시몬</button>
				<img id="l12" src="assets/lines/12-line.svg" alt="">
			</div>

			<div id="img-people">
				<img id="manImage" src="" alt="">
			</div>

			<div id="peopleInfo" style="display: none">
				<img id="closeManInfo" class="closeBtn" src="assets/btn-close.svg" alt="" onclick="closePeopleInfo()">
				<h3 id="man-name">바르톨로메오</h3>
				<p id="man-info">
					야고보 곁에 허리를 굽혀 예수님 쪽을 주시하고 있으며,
					많이 생각하고 연구하는 스타일이다.
				</p>
			</div>

		</div>

		<!-- Content tab-3 -->
		<div id="content-3">
			<div id="secretPanel">
				<h1>명작의 탄생 그 안에 든 1%의 비밀은?</h1>
				<div id="redPoint"></div>
				<div class="wrap">
					<svg version="1.1" id="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 2560 1443" style="enable-background:new 0 0 2560 1443;" xml:space="preserve">
						<g class="linestart">
							<!--가로 세로 중심 라인 -->
							<line id="line1" class="st0" x1="1285" y1="0" x2="1285" y2="1443"/>
							<line id="line2" class="st0" x1="0" y1="753" x2="2559" y2="753"/>
							<line id="line3" class="st0" x1="0" y1="1041" x2="2559" y2="1041"/>

							<!-- x라인 -->
							<line id="line4" class="st0" x1="497" y1="0" x2="2003" y2="1443"/>
							<line id="line5" class="st0" x1="2072" y1="0" x2="566" y2="1442"/>

							<!-- 사선 왼쪽부터 360도 -->
							<line id="line6" class="st0" x1="1284" y1="753" x2="0" y2="113"/>
							<line id="line7" class="st0" x1="773" y1="3" x2="1284" y2="753"/>
							<line id="line8" class="st0" x1="1028" y1="0" x2="1284" y2="753"/>
							<line id="line9" class="st0" x1="1541" y1="0" x2="1285" y2="753"/>
							<line id="line10" class="st0" x1="1796" y1="3" x2="1285" y2="753.38"/>
							<line id="line11" class="st0" x1="1285" y1="753" x2="2557" y2="122"/>
							<line id="line12" class="st0" x1="1286" y1="753" x2="2560" y2="1442"/>
							<line id="line13" class="st0" x1="1285" y1="753" x2="1" y2="1442"/>

							<!--왼쪽부터 소실점까지 세로라인-->
							<line id="line14" class="st0" x1="66" y1="146" x2="66" y2="753"/>
							<line id="line15" class="st0" x1="443" y1="335" x2="443" y2="753"/>
							<line id="line16" class="st0" x1="655" y1="439" x2="655" y2="753"/>
							<line id="line17" class="st0" x1="795" y1="510" x2="795" y2="753"/>
							<line id="line18" class="st0" x1="971" y1="596" x2="971" y2="753"/>
							<line id="line19" class="st0" x1="1090" y1="657" x2="1090" y2="753"/>

							<!--오른쪽부터 소실점까지 세로라인-->
							<line id="line14" class="st0" x1="2509" y1="147" x2="2509" y2="754"/>
							<line id="line15" class="st0" x1="2124" y1="342" x2="2124" y2="754"/>
							<line id="line16" class="st0" x1="1912" y1="447" x2="1912" y2="753"/>
							<line id="line17" class="st0" x1="1774" y1="516" x2="1774" y2="754"/>
							<line id="line18" class="st0" x1="1596" y1="605" x2="1596" y2="754"/>
							<line id="line19"class="st0" x1="1480" y1="663" x2="1480" y2="754"/>
						</g>
					</svg>
				</div>
				
				<div class="btn_area">
					<div class="blue_btn">
						<span class="light"></span>
						<button id="vanishingPointBtn" onclick="showVanishingPointInfo()">원근법과 소실점</button>
					</div>
				</div>
			</div>

			<div id="vanishingPointPanel" style="display: none">
				<img class="closeBtn" src="assets/btn-close.svg" alt="" onclick="closeContent('#vanishingPointPanel')">
				<h3>원근법과 소실점</h3>
				<p id="vanishingInfo">
					레오나르도는  ‘모든 선이 모여드는 하나의 점’ 을 말하며,
					이 그림의  소실점을 벽면 중앙에 작은 못을 박았다.
					이를 바탕으로 수학적으로 완벽한 대칭을 이루는
					1:1:6 비율의 균형을 완성한 것이다.
					<br><br>
					지난 500년 동안 불순물이 쌓이고,
					표면이 심각하게 갈라지는 문제를 해결하기 위해
					복원 작업을 진행하던 중
					예수 얼굴 오른쪽 관자놀이에 뚫린 못 자국을 발견했다.
				</p>
				<img src="assets/jesus-point@2x.png" alt="">
			</div>
		</div>

		<!-- Content tab-4 -->
		<div id="content-4" style="display: none">
			<div id="notePanel">
				<h1>최후의 만찬에 숨겨진 암호 코드가 있다?</h1>
				<div class="note_area">
					<img id="nodeCode" src="assets/note-code.gif" alt="">
				</div>

				<div class="btn_area">
					<div class="blue_btn">
						<span class="light"></span>
						<button id="hiddenMusicBtn" onclick="showVideoPanel()">작품 속 숨겨진 음악</button>
					</div>
				</div>
			</div>

			<div id="videoPanel" style="display: none">
				<img class="closeBtn" src="assets/btn-close.svg" alt="" onclick="closeContent('#videoPanel')">
				<h3>작품 속 숨겨진 음악</h3>
				<p id="videoInfo">
					이탈리아 음악가 지오다니 마리아 팔라는 최후의 만찬 그림에서
					40초짜리 악보를 발견하였으며
					예수와 열두 제자들의 손과 빵이 음표 역할을 한다고 주장했다.
				</p>
				<div class="video-container">
					<iframe width="480" height="300" src="https://www.youtube.com/embed/MkuIzdHwOAk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
				</div>
			</div>

		</div>

	</div>
</div>

<!--##################################################### Footer ####################################################-->
<div id="footer">
	<div id="footer-wrapper">
		<img id="logo" src="assets/letsee-signature-w-rgb.png" alt="">
		<p id="copyright">Copyright (c) Letsee, Inc</p>
	</div>
</div>

<script type="text/javascript">

	/**
	 * Letsee Initialize function.
	 */
	function initLetsee() {
		let CURRENT_URI = null;
		let currentTarget = null;
		const world = new Object3D();

		const initWorld = (e) =>  {
			let uri = e.target.uri;
			console.warn(uri);

			if (CURRENT_URI == null) {
				CURRENT_URI = uri;
				currentTarget = app.engine.getEntity(CURRENT_URI);
				e.target.addRenderable(world);
			}

			if (uri !== CURRENT_URI) {
				app.engine.getEntity(CURRENT_URI).removeRenderable(world);
				CURRENT_URI = uri;
				currentTarget = app.engine.getEntity(CURRENT_URI);
				e.target.addRenderable(world);
			}
		};
		
		const config = {
			"appKey": "8hTenCFZL3q3jIBZLHoQ72QYTvJdKM5IROK5hdUS69JeH91iGfWD7ApQWZSwzN2g",
			"trackerType": "PLANAR",
			"isSteady": true
		};
		const app = new Letsee(config);
		if(app !== null && typeof app !== 'undefined') {
			app.addEventListener('trackstart', e => {
			  console.warn(e);
				initWorld(e);
        showMainPage();
			});

			app.addEventListener('trackend', e => {
				initWorld(e);
				
				// Only show the 'capture' screen in landscape mode
				// For portrait mode, 'capture' screen is hidden and controlled by media queries
				if (screen.width > screen.height) {
          showCapture();
				}
			})
		}
	}

	/**
	 * When the document is loaded, letsee is initialized.
	 */
	$(document).ready(() => {
    initLetsee();
    $('#main-content').css('display', 'none');
    $('#night').css('display', 'none');
    $('#spotLightBtn').css('display', 'none');
	});

  $('#layerviewBtn').click((e) => {
    // $('#tab-1').addClass('tab-active');
    // switchTab(1);
	  showFirstTab();
  });

</script>
</body>
</html>
